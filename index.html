<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üåä PCM √ó Tech Ocean - Your Complete Journey</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <div class="ocean-wave-loader">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
      </div>
      <h1 class="loading-title">üåä PCM √ó Tech Ocean</h1>
      <p class="loading-text">Preparing your personalized journey...</p>
      <div class="loading-bar">
        <div class="loading-progress" id="loading-progress"></div>
      </div>
    </div>
  </div>

  <!-- Main App -->
  <div id="app" class="app-container" style="display: none;">
    <!-- Top Navigation Bar -->
    <nav class="top-navbar">
      <div class="navbar-left">
        <button class="menu-toggle" onclick="toggleSidebar()">
          <i class="fas fa-bars"></i>
        </button>
        <div class="brand">
          <span class="brand-icon">üåä</span>
          <h1 class="brand-title">PCM √ó Tech Ocean</h1>
        </div>
      </div>
      
      <div class="navbar-center">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search levels, songs, topics..." id="global-search">
        </div>
      </div>

      <div class="navbar-right">
        <div class="stat-badge">
          <i class="fas fa-fire"></i>
          <span id="streak-count">0</span>
        </div>
        <div class="stat-badge">
          <i class="fas fa-star"></i>
          <span id="xp-count">0 XP</span>
        </div>
        <div class="stat-badge level-badge">
          <i class="fas fa-trophy"></i>
          <span id="level-count">Lvl 1</span>
        </div>
        <button class="theme-btn" onclick="showThemeSelector()">
          <i class="fas fa-palette"></i>
          <span id="theme-timer">48:00:00</span>
        </button>
        <div class="profile-menu">
          <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=ocean" alt="Profile" class="profile-avatar">
        </div>
      </div>
    </nav>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-content">
        <!-- Journey Section -->
        <div class="nav-section">
          <h3 class="nav-section-title">
            <i class="fas fa-map-marked-alt"></i>
            Your Journey
          </h3>
          <button class="nav-item active" data-section="dashboard">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
          </button>
          <button class="nav-item" data-section="game-levels">
            <i class="fas fa-gamepad"></i>
            <span>Game Levels</span>
            <span class="badge">120+</span>
          </button>
          <button class="nav-item" data-section="progress">
            <i class="fas fa-chart-line"></i>
            <span>My Progress</span>
          </button>
        </div>

        <!-- Learning Tools -->
        <div class="nav-section">
          <h3 class="nav-section-title">
            <i class="fas fa-brain"></i>
            Deep Learning
          </h3>
          <button class="nav-item" data-section="feynman">
            <i class="fas fa-lightbulb"></i>
            <span>Feynman Technique</span>
          </button>
          <button class="nav-item" data-section="spaced-repetition">
            <i class="fas fa-calendar-check"></i>
            <span>Spaced Repetition</span>
          </button>
          <button class="nav-item" data-section="active-recall">
            <i class="fas fa-brain"></i>
            <span>Active Recall</span>
          </button>
          <button class="nav-item" data-section="mind-maps">
            <i class="fas fa-project-diagram"></i>
            <span>Mind Maps</span>
          </button>
        </div>

        <!-- Study Tools -->
        <div class="nav-section">
          <h3 class="nav-section-title">
            <i class="fas fa-tools"></i>
            Study Tools
          </h3>
          <button class="nav-item" data-section="pomodoro">
            <i class="fas fa-clock"></i>
            <span>Pomodoro Timer</span>
          </button>
          <button class="nav-item" data-section="notes">
            <i class="fas fa-sticky-note"></i>
            <span>My Notes</span>
          </button>
          <button class="nav-item" data-section="flashcards">
            <i class="fas fa-layer-group"></i>
            <span>Flashcards</span>
          </button>
        </div>

        <!-- Music & Vibes -->
        <div class="nav-section">
          <h3 class="nav-section-title">
            <i class="fas fa-music"></i>
            Music & Vibes
          </h3>
          <button class="nav-item" data-section="music-ocean">
            <i class="fas fa-headphones"></i>
            <span>Music Ocean</span>
            <span class="badge">150+</span>
          </button>
          <button class="nav-item" data-section="ambient-sounds">
            <i class="fas fa-water"></i>
            <span>Ambient Sounds</span>
          </button>
        </div>

        <!-- Resources -->
        <div class="nav-section">
          <h3 class="nav-section-title">
            <i class="fas fa-book"></i>
            Resources
          </h3>
          <button class="nav-item" data-section="challenges">
            <i class="fas fa-trophy"></i>
            <span>Daily Challenges</span>
          </button>
          <button class="nav-item" data-section="achievements">
            <i class="fas fa-medal"></i>
            <span>Achievements</span>
          </button>
          <button class="nav-item" data-section="leaderboard">
            <i class="fas fa-ranking-star"></i>
            <span>Leaderboard</span>
          </button>
        </div>
      </div>

      <!-- Sidebar Footer -->
      <div class="sidebar-footer">
        <div class="current-theme-display">
          <div class="theme-preview" id="current-theme-preview"></div>
          <div class="theme-info">
            <span class="theme-name" id="current-theme-name">Ocean Depths</span>
            <span class="theme-type" id="current-theme-type">Calm</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content">
      <!-- Content loads dynamically here -->
    </main>

    <!-- Floating Music Player -->
    <div class="floating-music-player" id="music-player">
      <div class="player-left">
        <div class="song-artwork">
          <img id="current-artwork" src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=100" alt="Song">
          <div class="artwork-overlay">
            <div class="visualizer">
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
            </div>
          </div>
        </div>
        <div class="song-info">
          <div class="song-title" id="current-title">No song playing</div>
          <div class="song-artist" id="current-artist">Select a song to start</div>
        </div>
      </div>

      <div class="player-center">
        <div class="player-controls">
          <button class="control-btn" onclick="shuffleSongs()">
            <i class="fas fa-shuffle"></i>
          </button>
          <button class="control-btn" onclick="previousSong()">
            <i class="fas fa-step-backward"></i>
          </button>
          <button class="control-btn play-btn" onclick="togglePlay()">
            <i class="fas fa-play" id="play-icon"></i>
          </button>
          <button class="control-btn" onclick="nextSong()">
            <i class="fas fa-step-forward"></i>
          </button>
          <button class="control-btn" onclick="toggleRepeat()">
            <i class="fas fa-repeat" id="repeat-icon"></i>
          </button>
        </div>
        <div class="progress-container">
          <span class="time-current" id="time-current">0:00</span>
          <div class="progress-bar" onclick="seekSong(event)">
            <div class="progress-fill" id="progress-fill"></div>
            <div class="progress-handle" id="progress-handle"></div>
          </div>
          <span class="time-total" id="time-total">0:00</span>
        </div>
      </div>

      <div class="player-right">
        <button class="control-btn" onclick="toggleLyrics()">
          <i class="fas fa-align-left"></i>
        </button>
        <button class="control-btn" onclick="toggleQueue()">
          <i class="fas fa-list"></i>
        </button>
        <div class="volume-control">
          <button class="control-btn" onclick="toggleMute()">
            <i class="fas fa-volume-up" id="volume-icon"></i>
          </button>
          <input type="range" class="volume-slider" min="0" max="100" value="70" id="volume-slider">
        </div>
        <button class="control-btn expand-btn" onclick="expandPlayer()">
          <i class="fas fa-expand"></i>
        </button>
      </div>
    </div>

    <!-- Audio Element -->
    <audio id="audio-player" preload="metadata"></audio>
  </div>

  <!-- Theme Selector Modal -->
  <div class="modal" id="theme-modal">
    <div class="modal-content theme-selector">
      <div class="modal-header">
        <h2>üé® Choose Your Theme</h2>
        <button class="close-btn" onclick="closeThemeSelector()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="theme-grid">
        <!-- Themes load here -->
      </div>
    </div>
  </div>

  <!-- Scripts - PROPER ORDER IS CRITICAL -->
  <script>
    // Error handler
    window.addEventListener('error', function(e) {
      console.error('Global Error:', e.message, e.filename, e.lineno);
    });
    
    // Check if scripts loaded
    window.addEventListener('load', function() {
      console.log('‚úÖ Page fully loaded');
      
      // Verify critical objects exist
      setTimeout(() => {
        if (typeof APP_CONFIG === 'undefined') {
          console.error('‚ùå APP_CONFIG not loaded!');
          document.body.innerHTML = '<div style="color: white; padding: 50px; text-align: center;"><h1>Error: Configuration not loaded</h1><p>Please refresh the page</p></div>';
        }
        if (typeof MUSIC_LIBRARY === 'undefined') {
          console.error('‚ùå MUSIC_LIBRARY not loaded!');
        }
        if (typeof GAME_LEVELS === 'undefined') {
          console.error('‚ùå GAME_LEVELS not loaded!');
        }
      }, 100);
    });
  </script>
  
  <script src="config.js"></script>
  <script src="themes.js"></script>
  <script src="music-library.js"></script>
  <script src="game-levels.js"></script>
  <script src="deep-learning.js"></script>
  <script src="music-player.js"></script>
  <script src="game-engine.js"></script>
  <script src="learning-tools.js"></script>
  <script src="app.js"></script>
</body>
</html>
